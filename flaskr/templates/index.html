<!--
Ok so, basically https://developers.arcgis.com/javascript/latest/sample-code/intro-graphics/index.html
but 3D.

I'm missing the popup template, for some reason it wont work.
We need to extract the data, put it into "Graphics" and display em on the map
Once we've done it for one Layer, we can have a toggle on/off menu of layers 
which would correspond to different climate data and boom
Climate data 3D visualizer


TODO: 
Idk how we're gonna make the data change for when we use a slider to change the years
like idk how the api will handle it, if it'll actually refresh the sphere as the dataset changes or not
We shall see, but this could be a big dealbreaker :(
-->



<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>Intro to SceneView - Create a 3D map</title>
    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://js.arcgis.com/4.18/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.18/"></script>
    <script>
        require(["esri/Map", "esri/views/SceneView","esri/Graphic", "esri/layers/FeatureLayer"], function (Map, SceneView,Graphic, FeatureLayer) {
            var map = new Map({
                basemap: "topo-vector",
                ground: "world-elevation"
            });

            var view = new SceneView({
                container: "viewDiv", // Reference to the scene div created in step 5
                map: map, // Reference to the map object created before the scene
                scale: 50000000, // Sets the initial scale to 1:50,000,000
                center: [-101.17, 21.78] // Sets the center point of view with lon/lat
            });



            var symbol3d = {
  type: "point-3d",  // autocasts as new PointSymbol3D()
  symbolLayers: [{
    type: "object",  // autocasts as new ObjectSymbol3DLayer()
    width: 5,    // diameter of the object from east to west in meters
    height: 10,  // height of object in meters
    depth: 15,   // diameter of the object from north to south in meters
    resource: { primitive: "cube" },
    material: { color: "red" }
  }]
};
/*=================================================================================*/
var textSymbol = {
  type: "text",  // autocasts as new TextSymbol()
  color: "white",
  haloColor: "black",
  haloSize: "1px",
  text: "You are here",
  xoffset: 3,
  yoffset: 3,
  font: {  // autocasts as new Font()
    size: 12,
    family: "Josefin Slab",
    weight: "bold"
  }
};

/*=================================================================================*/

var point = {
  type: "point",  // autocasts as new Point()
  longitude: -71.2643,
  latitude: 42.0909
};
var point3d = {
  type: "point",  // autocasts as new Point()
  longitude: -60.2643,
  latitude: 50.0909
};

// Create a symbol for drawing the point
var markerSymbol = {
  type: "simple-marker",  // autocasts as new SimpleMarkerSymbol()
  color: [226, 119, 40]
};
var point3dGraphic = new Graphic({
  geometry: point3d,
  symbol: symbol3d,
  popupTemplate: {
      // autocasts as new PopupTemplate()
      title: "hello",
      content: [
        {
          type: "fields",
          fieldInfos: [
            {
              fieldName: "Name"
            },
            {
              fieldName: "Owner"
            },
            {
              fieldName: "Length"
            }
          ]
        }
      ]
    }
});
// Create a graphic and add the geometry and symbol to it
var pointGraphic = new Graphic({
  geometry: point,
  symbol: markerSymbol,
  popupTemplate: {
      // autocasts as new PopupTemplate()
      title: "{Name}",
      content: [
        {
          type: "fields",
          fieldInfos: [
            {
              fieldName: "Name"
            },
            {
              fieldName: "Owner"
            },
            {
              fieldName: "Length"
            }
          ]
        }
      ]
    }
});

/*=================================================================================*/


            var polyline = {
    type: "polyline", // autocasts as new Polyline()
    paths: [[-111.3, 52.68], [-98, 49.5], [-93.94, 29.89]]
  };

  // Create a symbol for drawing the line
  var lineSymbol = {
    type: "simple-line", // autocasts as SimpleLineSymbol()
    color: [226, 119, 40],
    width: 4
  };

  // Create an object for storing attributes related to the line
  var lineAtt = {
    Name: "Keystone Pipeline",
    Owner: "TransCanada",
    Length: "3,456 km"
  };

  /*******************************************
   * Create a new graphic and add the geometry,
   * symbol, and attributes to it. You may also
   * add a simple PopupTemplate to the graphic.
   * This allows users to view the graphic's
   * attributes when it is clicked.
   ******************************************/
  var polylineGraphic = new Graphic({
    geometry: polyline,
    symbol: lineSymbol,
    attributes: lineAtt,
    popupTemplate: {
      // autocasts as new PopupTemplate()
      title: "{Name}",
      content: [
        {
          type: "fields",
          fieldInfos: [
            {
              fieldName: "Name"
            },
            {
              fieldName: "Owner"
            },
            {
              fieldName: "Length"
            }
          ]
        }
      ]
    }
  });

  // Add the line graphic to the view's GraphicsLayer
  view.graphics.add(polylineGraphic);
  view.graphics.add(pointGraphic);
  view.graphics.add(point3dGraphic);
        });
    </script>
</head>

<body>
    <div id="viewDiv"> <span id="layerToggle" class="esri-widget"> <input type="checkbox" id="streetsLayer" checked />
            Transportation </span></div>
</body>

</html>